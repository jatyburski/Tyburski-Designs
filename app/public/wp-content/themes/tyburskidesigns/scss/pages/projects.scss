@import 'projects/masthead';
@import 'projects/images';
@import 'projects/content';

.projects {
    display: grid;
    gap: 40px 35px;
    grid-auto-rows: minmax(400px, auto);
    grid-template-columns: repeat(3, 1fr);
    padding: 0 var(--col) 350px;

    @include media-breakpoint-down(lg) {
        gap: 25px;
        grid-auto-rows: minmax(225px, auto);
        padding: 0 var(--col) 225px;
    }

    @include media('<tablet') {
        gap: 30px;
        grid-auto-rows: minmax(auto);
        grid-template-columns: 1fr;
        padding: 0 var(--col) 25px;
    }

    @include media('>=phone', '<tablet', 'landscape') {
        padding-left: calc(var(--col) * 2);
    }

    &__card {
        &:nth-child(even) {
            transform: translateY(50%);

            @include media('<tablet') {
                transform: none;
            }

        }
        &:nth-child(8n + 2), &:nth-child(8n + 8) {
            transform: translateY(-50%);

            @include media('<tablet') {
                transform: none;
            }

        }
        &:nth-child(8n + 1) {
            grid-column: 2 / span 2;

            @include media('<tablet') {
                grid-column: 1;
            }

        }
        &:nth-child(8n + 5) {
            grid-column: 1 / span 2;

            @include media('<tablet') {
                grid-column: 1;
            }

            + .projects__card {
                grid-column-start: 1;

                @include media('<tablet') {
                    grid-column-start: initial;
                }

            }
        }
    }
    &__tilt {
        @extend %bg-tint;
        overflow: hidden;
        perspective: 1000px;

        @include media-breakpoint-down(md) {
            margin: 0;
        }
        
        &:hover,
        &:focus {
            outline: none;
        }
    }
    &__img {
        @include width-height(100%);
        &::before {
            @include width-height(90%);
            content: '';
            left: 5%;
            position: absolute;
            top: 5%;
        }
        @at-root .smooth & {
            transition: transform 0.2s ease-out;
        }
        img {
            @include object-fit(cover, left center);
            @include width-height(100%);
        }
        figcaption {
            bottom: 0;
            padding: 4em;
            width: 100%;
            @at-root .smooth & {
                transition: transform 0.2s ease-out;
            }
        }
    }
    &__deco {
        @include width-height(100%);
        left: 0;
        top: 0;
        &--shine div {
            @include width-height(200%);
            // background-image: linear-gradient(45deg, rgba(theme-color('primary'), 0.5) 0%, rgba(theme-color-level('primary', 5), 0.25) 50%, transparent 100%);
            left: -50%;
            top: -50%;
            @at-root .smooth & {
                transition: transform 0.2s ease-out;
            }
        }
        &--lines {
            fill: none;
            stroke: theme-color('white');
            stroke-width: 1.5px;
            @at-root .smooth & {
                transition: transform 0.2s ease-out;
            }
        }
    }
}